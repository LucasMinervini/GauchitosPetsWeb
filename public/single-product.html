<!DOCTYPE html>
<html lang="es">
<head>
    <title>Los Gauchitos Pets</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="author" content="">
    <meta name="keywords" content="">
    <meta name="description" content="">
  
    <link rel="stylesheet" href="css/swiper.css" />
    <link rel="stylesheet" href="css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="css/vendor.css">
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Chilanka&family=Montserrat:wght@300;400;500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
  
    <style>
        .product-details {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .product-title {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .product-price h3 {
            font-size: 1.5rem;
            color: #E53935; /* Color del precio */
            margin-bottom: 20px;
        }

        .product-options label {
            font-weight: bold;
            margin-top: 10px;
        }

        .product-options select, 
        .product-options input {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
        }

        .btn-lg {
            background-color: #E53935;
            border: none;
            color: white;
            text-transform: uppercase;
        }

        .shipping-calculator label {
            font-weight: bold;
        }

        .shipping-calculator input {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
        }

        .shipping-calculator button {
            width: 100%;
            background-color: #757575;
            border: none;
            color: white;
        }

        ul.list-unstyled {
            padding-left: 0;
            line-height: 1.6;
        }

        ul.list-unstyled li {
            font-size: 1rem;
            margin-bottom: 10px;
        }

        ul.list-unstyled li strong {
            font-weight: bold;
        }

        #product-description {
            font-size: 1rem;
            line-height: 1.6;
        }

        /* Estilos para la galería de imágenes */
        .product-gallery {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .product-gallery img {
            width: 100px;
            height: 100px;
            object-fit: cover;
            cursor: pointer;
        }

        .product-gallery img:hover {
            opacity: 0.8;
        }

    </style>
</head>
<body>
<header>
    <div class="container py-2">
        <div class="row py-4 pb-0 pb-sm-4 align-items-center">
            <div class="col-sm-4 col-lg-3 text-center text-sm-start">
                <div class="main-logo">
                    <a href="index.html">
                        <img src="images/logo.png" alt="logo" class="img-fluid" style="width: 50%;">
                    </a>
                </div>
            </div>

            <div class="col-sm-6 offset-sm-2 offset-md-0 col-lg-5 d-none d-lg-block">
              <div class="search-bar border rounded-2 px-3 border-dark-subtle position-relative">
                  <input type="text" id="product-search" class="form-control border-0 bg-transparent" placeholder="Buscar productos..." autocomplete="off" />
                  <div id="suggestions" class="list-group position-absolute w-100"></div>
              </div>
          </div>
          
            <div class="col-sm-8 col-lg-4 d-flex justify-content-between gap-5 align-items-center mt-4 mt-sm-0">
              <!-- Liniers -->
              <div class="support-box text-center d-none d-xl-block">
                  <span class="fs-6 secondary-font text-muted d-block">Liniers</span>
                  <div class="d-flex justify-content-center align-items-center mb-2">
                      <a href="https://wa.me/541125257949?text=Hola!%20necesito%20ayuda!" target="_blank" class="d-flex align-items-center">
                          <img width="30" height="30" src="https://img.icons8.com/3d-fluency/94/whatsapp.png" alt="whatsapp" class="me-2" />
                          <h5 class="mb-0" style="font-size: medium;">+54112525-7949</h5>
                      </a>
                  </div>
                  <div class="d-flex justify-content-center align-items-center">
                      <a href="https://www.google.com/maps?q=Av.+Lisandro+de+la+Torre+402,+Liniers,+Argentina" target="_blank">
                          <iconify-icon icon="mdi:map-marker" class="fs-4 me-2"></iconify-icon>
                      <span class="fs-6 secondary-font text-muted">Av. Lisandro de la Torre 402</span>
                    </a>
                      
                  </div>
              </div>
              <!-- La Plata -->
              <div class="support-box text-center d-none d-xl-block">
                  <span class="fs-6 secondary-font text-muted d-block">La Plata</span>
                  <div class="d-flex justify-content-center align-items-center mb-2">
                      <a href="https://wa.me/541131170104?text=Hola!%20Necesito%20ayuda!" target="_blank" class="d-flex align-items-center">
                          <img width="30" height="30" src="https://img.icons8.com/3d-fluency/94/whatsapp.png" alt="whatsapp" class="me-2" />
                          <h5 class="mb-0" style="font-size: medium;">+54113117-0104</h5>
                      </a>
                  </div>
                  <div class="d-flex justify-content-center align-items-center">
                      <a href="https://www.google.com/maps/place/Los+Gauchitos+Pet%E2%80%99s/@-34.9091854,-57.954907,17z/data=!3m1!4b1!4m6!3m5!1s0x95a2e73ddd405e6b:0xec268d597b04b465!8m2!3d-34.9091898!4d-57.9523321!16s%2Fg%2F11sc2jsy_7?entry=ttu" target="_blank">
                          <iconify-icon icon="mdi:map-marker" class="fs-4 me-2"></iconify-icon>
                      <span class="fs-6 secondary-font text-muted">Calle 5 e/44 y 45 n°628, La Plata</span>
                    </a>
                      
                  </div>
              </div>
          </div>
          
                 
        </div>
    </div>

    <div class="container-fluid">
        <hr class="m-0">
    </div>

    <div class="container">
        <nav class="main-menu d-flex navbar navbar-expand-lg align-items-center">
            <div class="d-flex align-items-center gap-3 flex-shrink-0" style="margin-right: auto;">
                <div class="location-box d-flex align-items-center">
                  <div id="user-info"></div>
                </div>
                <div class="location-box d-flex align-items-center">
                    <span class="fs-6 secondary-font text-muted"></span>
                </div>
            </div>

            <ul class="navbar-nav menu-list list-unstyled d-flex justify-content-center gap-md-3 mb-0" style="margin-left: auto; margin-right: auto;">
                <li class="nav-item">
                    <a href="index.html" class="nav-link active" style="font-size: x-large;">Inicio</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="perrosDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="font-size: x-large;">Perros</a>
                    <ul class="dropdown-menu" aria-labelledby="perrosDropdown">
                        <li><a class="dropdown-item" href="alimentos-perros.html">Alimentos</a></li>
                        <li><a class="dropdown-item" href="juguetes-perros.html">Juguetes</a></li>
                        <li><a class="dropdown-item" href="accesorios-perros.html">Accesorios</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="gatosDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="font-size: x-large;">Gatos</a>
                    <ul class="dropdown-menu" aria-labelledby="gatosDropdown">
                        <li><a class="dropdown-item" href="alimentos-gatos.html">Alimentos</a></li>
                        <li><a class="dropdown-item" href="juguetes-gatos.html">Juguetes</a></li>
                        <li><a class="dropdown-item" href="accesorios-gatos.html">Accesorios</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="otrosAnimalesDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="font-size: x-large;">Otros Animales</a>
                    <ul class="dropdown-menu" aria-labelledby="otrosAnimalesDropdown">
                        <li><a class="dropdown-item" href="roedores.html">Roedores</a></li>
                        <li><a class="dropdown-item" href="peces.html">Peces</a></li>
                        <li><a class="dropdown-item" href="reptiles.html">Reptiles</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="farmaciaDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="font-size: x-large;">Farmacia</a>
                    <ul class="dropdown-menu" aria-labelledby="farmaciaDropdown">
                        <li><a class="dropdown-item" href="medicamentos.html">Medicamentos</a></li>
                        <li><a class="dropdown-item" href="suplementos.html">Suplementos</a></li>
                    </ul>
                </li>
            </ul>

            <div class="d-flex align-items-end flex-shrink-0">
                <ul class="d-flex justify-content-end list-unstyled m-0">
                    <li>
                        <a href="login.html" class="mx-3">
                            <iconify-icon icon="healthicons:person" class="fs-4"></iconify-icon>
                        </a>
                    </li>
                    <li>
                        <a href="wishlist.html" class="mx-3">
                            <iconify-icon icon="mdi:heart" class="fs-4"></iconify-icon>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="mx-3" data-bs-toggle="offcanvas" data-bs-target="#offcanvasCart" aria-controls="offcanvasCart">
                            <iconify-icon icon="mdi:cart" class="fs-4 position-relative"></iconify-icon>
                            <span id="cart-badge" class="position-absolute translate-middle badge rounded-circle bg-primary pt-2">0</span>
                        </a>
                    </li>
                </ul>
            </div>
        </nav>
    </div>
</header>

<div class="container my-5">
  <div class="row">
      <!-- Columna izquierda: Imagen del producto -->
      <div class="col-md-6">
          <img id="product-image" src="" alt="Product Image" class="img-fluid mb-3" />
          
          <!-- Galería de imágenes adicionales -->
          <div id="product-gallery" class="product-gallery"></div>
      </div>
      
      <!-- Columna derecha: Detalles del producto -->
      <div class="col-md-6">
          <div class="product-details">
              <h1 id="product-name" class="product-title"></h1>
              <div class="product-price">
                  <h3 id="product-price"></h3>
              </div>
              
              <!-- Opciones de selección como peso, cantidad -->
              <div class="product-options">
                  <label for="product-weight">Peso:</label>
                  <select id="product-weight" class="form-control">
                      <option value="15kg">15 KG</option>
                      <!-- Agregar más opciones aquí -->
                  </select>
                  
                  <label for="product-quantity" class="mt-3">Cantidad</label>
                  <input type="number" id="product-quantity" class="form-control" value="1" min="1" />
              </div>
              
              <!-- Aquí se insertará el botón de "Agregar al carrito" -->
              <div id="product-actions"></div>
              
              <!-- Cálculo de envío -->
              <div class="shipping-calculator mt-4">
                  <label for="postal-code">Medios de envío</label>
                  <input type="text" id="postal-code" class="form-control" placeholder="Tu código postal" />
                  <button class="btn btn-secondary mt-2">CALCULAR</button>
              </div>
          </div>
      </div>
  </div>
  
  <!-- Ficha técnica y descripción del producto -->
  <div class="row mt-5">
      <div class="col-md-6">
          <h3>Ficha Técnica</h3>
          <ul class="list-unstyled">
              <li><strong>Edad:</strong> <span id="product-age">Cachorro</span></li>
              <li><strong>Marca:</strong> <span id="product-brand">Natural Meat</span></li>
              <li><strong>Tamaño de la Mascota:</strong> <span id="pet-size">Todos los tamaños</span></li>
              <li><strong>Alimento Medicado:</strong> <span id="medicated-food">No</span></li>
              <li><strong>Presentaciones:</strong> <span id="product-presentation">15 Kg</span></li>
              <li><strong>Sabor:</strong> <span id="product-flavor">Carne y Frutas</span></li>
          </ul>
      </div>
      
      <div class="col-md-6">
          <h3>Descripción</h3>
          <p id="product-description">Aquí va la descripción detallada del producto.</p>
      </div>
  </div>
</div>

<footer id="footer" class="my-5" style="background-color: wheat;"> 
    <div class="container py-5 my-5">
      <div class="row">
        <div class="col-md-3">
          <div class="footer-menu">
            <img src="images/logo.png" alt="logo" style="width:50%">
            <p class="blog-paragraph fs-6 mt-3">De Lunes a Viernes 10hs-20:30hs.</p>
            <div class="social-links">
              <ul class="d-flex list-unstyled gap-2">
                <li class="social">
                  <a href="#">
                    <iconify-icon class="social-icon" icon="ri:facebook-fill"></iconify-icon>
                  </a>
                </li>
                <li class="social">
                  <a href="#">
                    <iconify-icon class="social-icon" icon="ri:twitter-fill"></iconify-icon>
                  </a>
                </li>
                <li class="social">
                  <a href="#">
                    <iconify-icon class="social-icon" icon="ri:pinterest-fill"></iconify-icon>
                  </a>
                </li>
                <li class="social">
                  <a href="#">
                    <iconify-icon class="social-icon" icon="ri:instagram-fill"></iconify-icon>
                  </a>
                </li>
                <li class="social">
                  <a href="#">
                    <iconify-icon class="social-icon" icon="ri:youtube-fill"></iconify-icon>
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="footer-menu">
            <h3>Enlaces Rápidos</h3>
            <ul class="menu-list list-unstyled">
              <li class="menu-item">
                <a href="#" class="nav-link">Inicio</a>
              </li>
              <li class="menu-item">
                <a href="#" class="nav-link">Servicios</a>
              </li>
              <li class="menu-item">
                <a href="#" class="nav-link">Contacto </a>
              </li>
            </ul>
          </div>
        </div>
        <div class="col-md-3">
          <div class="footer-menu">
            <h3>Ayuda central</h3>
              <ul class="menu-list list-unstyled">
                <li class="menu-item">
                  <a href="#" class="nav-link">Preguntas Frecuentes</a>
                </li>
                <li class="menu-item">
                  <a href="#" class="nav-link">Métodos de pago</a>
                </li>
                <li class="menu-item">
                  <a href="checkout.html" class="nav-link">Checkout</a>
                </li>
              </ul>
          </div>
        </div>
        <div class="col-md-3">
          <div>
            <h3>Newsletter</h3>
            <p class="blog-paragraph fs-6">Puede suscribirse para mantenerse al tanto con las ofertas.</p>
            <div class="search-bar border rounded-pill border-dark-subtle px-2">
              <form class="text-center d-flex align-items-center" action="" method="">
                <input type="text" class="form-control border-0 bg-transparent" placeholder="Ingresá tu email" />
                <iconify-icon class="send-icon" icon="tabler:location-filled"></iconify-icon>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
</footer>

<!-- Incluye los scripts necesarios -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="js/bootstrap.bundle.min.js"></script>
<script src="https://code.iconify.design/2/2.1.2/iconify.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Obtener el ID del producto desde la URL
    const urlParams = new URLSearchParams(window.location.search);
    const productId = urlParams.get('id');

    if (productId) {
        const productApiUrl = `http://localhost:8080/api/products/details/${productId}`;
        const fichaTecnicaApiUrl = `http://localhost:8080/api/products/fichaTecnica/${productId}`;

        loadSingleProduct(productApiUrl);
        loadFichaTecnica(fichaTecnicaApiUrl);
    } else {
        document.getElementById('product-name').textContent = 'Producto no encontrado';
    }
});

function loadSingleProduct(apiUrl) {
  fetch(apiUrl)
      .then(response => {
          console.log('Response completa:', response);  // Añadir log para ver la respuesta completa
          if (!response.ok) {
              throw new Error('Error al obtener el producto');
          }
          return response.json();
      })
      .then(product => {
          console.log('Producto recibido:', product); // Ver los datos recibidos
          
          if (!product || !product.name) {
              document.getElementById('product-name').textContent = 'Producto no encontrado';
              document.getElementById('product-price').textContent = 'Precio no disponible';
              document.getElementById('product-description').textContent = 'Descripción no disponible';
              return;
          }

          // Asignar los datos del producto a los elementos HTML correspondientes
          document.getElementById('product-name').textContent = product.name;
          document.getElementById('product-price').textContent = product.retail_price  ? `$${parseFloat(product.retail_price).toFixed(2)}` : 'Precio no disponible';
          document.getElementById('product-description').textContent = product.description || 'Descripción no disponible';

          // Mostrar la imagen principal (la primera en el array)
          if (product.image_urls && product.image_urls.length > 0) {
              document.getElementById('product-image').src = product.image_urls[0];
          } else {
              document.getElementById('product-image').src = 'default-image.png';
          }

          // Mostrar todas las imágenes en la galería
          const gallery = document.getElementById('product-gallery');
          product.image_urls.forEach(url => {
              const imgElement = document.createElement('img');
              imgElement.src = url;
              imgElement.alt = product.name;
              gallery.appendChild(imgElement);
          });

          // Agregar el botón "Agregar al carrito"
          const addToCartButton = `
              <button class="btn btn-primary btn-add-to-cart mt-3" data-product-id="${product.id}" data-product-name="${product.name}" data-product-price="${product.retail_price}">
                  Agregar al carrito
              </button>
          `;
          document.getElementById('product-actions').innerHTML = addToCartButton;

          // Event listener para agregar al carrito
          document.querySelector('.btn-add-to-cart').addEventListener('click', function() {
              addToCart(product.id, product.name, product.retail_price);
          });
      })
      .catch(error => {
          console.error('Error al obtener el producto:', error);
          document.getElementById('product-name').textContent = 'Error al cargar el producto';
      });
}

function loadFichaTecnica(apiUrl) {
  fetch(apiUrl)
      .then(response => {
          if (!response.ok) {
              throw new Error('Error al obtener la ficha técnica');
          }
          return response.json();
      })
      .then(details => {
          if (!details) {
              document.getElementById('product-age').textContent = 'No disponible';
              document.getElementById('product-brand').textContent = 'No disponible';
              document.getElementById('pet-size').textContent = 'No disponible';
              document.getElementById('medicated-food').textContent = 'No disponible';
              document.getElementById('product-presentation').textContent = 'No disponible';
              document.getElementById('product-flavor').textContent = 'No disponible';
              return;
          }

          // Asignar los detalles técnicos a los elementos HTML correspondientes
          document.getElementById('product-age').textContent = details.age || 'No disponible';
          document.getElementById('product-brand').textContent = details.brand || 'No disponible';
          document.getElementById('pet-size').textContent = details.pet_size || 'No disponible';
          document.getElementById('medicated-food').textContent = details.medicated_food ? 'Sí' : 'No';
          document.getElementById('product-presentation').textContent = details.presentation || 'No disponible';
          document.getElementById('product-flavor').textContent = details.flavor || 'No disponible';
      })
      .catch(error => {
          console.error('Error al obtener la ficha técnica:', error);
      });
}

</script>

</body>
</html>
